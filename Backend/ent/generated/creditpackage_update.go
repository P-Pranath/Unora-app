// Code generated by ent, DO NOT EDIT.

package generated

import (
	"context"
	"errors"
	"fmt"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/UnoraApp/be/ent/generated/creditpackage"
	"github.com/UnoraApp/be/ent/generated/predicate"
)

// CreditPackageUpdate is the builder for updating CreditPackage entities.
type CreditPackageUpdate struct {
	config
	hooks    []Hook
	mutation *CreditPackageMutation
}

// Where appends a list predicates to the CreditPackageUpdate builder.
func (_u *CreditPackageUpdate) Where(ps ...predicate.CreditPackage) *CreditPackageUpdate {
	_u.mutation.Where(ps...)
	return _u
}

// SetName sets the "name" field.
func (_u *CreditPackageUpdate) SetName(v string) *CreditPackageUpdate {
	_u.mutation.SetName(v)
	return _u
}

// SetNillableName sets the "name" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableName(v *string) *CreditPackageUpdate {
	if v != nil {
		_u.SetName(*v)
	}
	return _u
}

// SetDescription sets the "description" field.
func (_u *CreditPackageUpdate) SetDescription(v string) *CreditPackageUpdate {
	_u.mutation.SetDescription(v)
	return _u
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableDescription(v *string) *CreditPackageUpdate {
	if v != nil {
		_u.SetDescription(*v)
	}
	return _u
}

// ClearDescription clears the value of the "description" field.
func (_u *CreditPackageUpdate) ClearDescription() *CreditPackageUpdate {
	_u.mutation.ClearDescription()
	return _u
}

// SetCreditAmount sets the "credit_amount" field.
func (_u *CreditPackageUpdate) SetCreditAmount(v int) *CreditPackageUpdate {
	_u.mutation.ResetCreditAmount()
	_u.mutation.SetCreditAmount(v)
	return _u
}

// SetNillableCreditAmount sets the "credit_amount" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableCreditAmount(v *int) *CreditPackageUpdate {
	if v != nil {
		_u.SetCreditAmount(*v)
	}
	return _u
}

// AddCreditAmount adds value to the "credit_amount" field.
func (_u *CreditPackageUpdate) AddCreditAmount(v int) *CreditPackageUpdate {
	_u.mutation.AddCreditAmount(v)
	return _u
}

// SetBonusCredits sets the "bonus_credits" field.
func (_u *CreditPackageUpdate) SetBonusCredits(v int) *CreditPackageUpdate {
	_u.mutation.ResetBonusCredits()
	_u.mutation.SetBonusCredits(v)
	return _u
}

// SetNillableBonusCredits sets the "bonus_credits" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableBonusCredits(v *int) *CreditPackageUpdate {
	if v != nil {
		_u.SetBonusCredits(*v)
	}
	return _u
}

// AddBonusCredits adds value to the "bonus_credits" field.
func (_u *CreditPackageUpdate) AddBonusCredits(v int) *CreditPackageUpdate {
	_u.mutation.AddBonusCredits(v)
	return _u
}

// SetPriceAmount sets the "price_amount" field.
func (_u *CreditPackageUpdate) SetPriceAmount(v int) *CreditPackageUpdate {
	_u.mutation.ResetPriceAmount()
	_u.mutation.SetPriceAmount(v)
	return _u
}

// SetNillablePriceAmount sets the "price_amount" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillablePriceAmount(v *int) *CreditPackageUpdate {
	if v != nil {
		_u.SetPriceAmount(*v)
	}
	return _u
}

// AddPriceAmount adds value to the "price_amount" field.
func (_u *CreditPackageUpdate) AddPriceAmount(v int) *CreditPackageUpdate {
	_u.mutation.AddPriceAmount(v)
	return _u
}

// SetCurrency sets the "currency" field.
func (_u *CreditPackageUpdate) SetCurrency(v string) *CreditPackageUpdate {
	_u.mutation.SetCurrency(v)
	return _u
}

// SetNillableCurrency sets the "currency" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableCurrency(v *string) *CreditPackageUpdate {
	if v != nil {
		_u.SetCurrency(*v)
	}
	return _u
}

// SetDiscountPercent sets the "discount_percent" field.
func (_u *CreditPackageUpdate) SetDiscountPercent(v float64) *CreditPackageUpdate {
	_u.mutation.ResetDiscountPercent()
	_u.mutation.SetDiscountPercent(v)
	return _u
}

// SetNillableDiscountPercent sets the "discount_percent" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableDiscountPercent(v *float64) *CreditPackageUpdate {
	if v != nil {
		_u.SetDiscountPercent(*v)
	}
	return _u
}

// AddDiscountPercent adds value to the "discount_percent" field.
func (_u *CreditPackageUpdate) AddDiscountPercent(v float64) *CreditPackageUpdate {
	_u.mutation.AddDiscountPercent(v)
	return _u
}

// SetBadgeText sets the "badge_text" field.
func (_u *CreditPackageUpdate) SetBadgeText(v string) *CreditPackageUpdate {
	_u.mutation.SetBadgeText(v)
	return _u
}

// SetNillableBadgeText sets the "badge_text" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableBadgeText(v *string) *CreditPackageUpdate {
	if v != nil {
		_u.SetBadgeText(*v)
	}
	return _u
}

// ClearBadgeText clears the value of the "badge_text" field.
func (_u *CreditPackageUpdate) ClearBadgeText() *CreditPackageUpdate {
	_u.mutation.ClearBadgeText()
	return _u
}

// SetIsPopular sets the "is_popular" field.
func (_u *CreditPackageUpdate) SetIsPopular(v bool) *CreditPackageUpdate {
	_u.mutation.SetIsPopular(v)
	return _u
}

// SetNillableIsPopular sets the "is_popular" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableIsPopular(v *bool) *CreditPackageUpdate {
	if v != nil {
		_u.SetIsPopular(*v)
	}
	return _u
}

// SetIsActive sets the "is_active" field.
func (_u *CreditPackageUpdate) SetIsActive(v bool) *CreditPackageUpdate {
	_u.mutation.SetIsActive(v)
	return _u
}

// SetNillableIsActive sets the "is_active" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableIsActive(v *bool) *CreditPackageUpdate {
	if v != nil {
		_u.SetIsActive(*v)
	}
	return _u
}

// SetSortOrder sets the "sort_order" field.
func (_u *CreditPackageUpdate) SetSortOrder(v int) *CreditPackageUpdate {
	_u.mutation.ResetSortOrder()
	_u.mutation.SetSortOrder(v)
	return _u
}

// SetNillableSortOrder sets the "sort_order" field if the given value is not nil.
func (_u *CreditPackageUpdate) SetNillableSortOrder(v *int) *CreditPackageUpdate {
	if v != nil {
		_u.SetSortOrder(*v)
	}
	return _u
}

// AddSortOrder adds value to the "sort_order" field.
func (_u *CreditPackageUpdate) AddSortOrder(v int) *CreditPackageUpdate {
	_u.mutation.AddSortOrder(v)
	return _u
}

// Mutation returns the CreditPackageMutation object of the builder.
func (_u *CreditPackageUpdate) Mutation() *CreditPackageMutation {
	return _u.mutation
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (_u *CreditPackageUpdate) Save(ctx context.Context) (int, error) {
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *CreditPackageUpdate) SaveX(ctx context.Context) int {
	affected, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (_u *CreditPackageUpdate) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *CreditPackageUpdate) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *CreditPackageUpdate) check() error {
	if v, ok := _u.mutation.Name(); ok {
		if err := creditpackage.NameValidator(v); err != nil {
			return &ValidationError{Name: "name", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CreditAmount(); ok {
		if err := creditpackage.CreditAmountValidator(v); err != nil {
			return &ValidationError{Name: "credit_amount", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.credit_amount": %w`, err)}
		}
	}
	if v, ok := _u.mutation.PriceAmount(); ok {
		if err := creditpackage.PriceAmountValidator(v); err != nil {
			return &ValidationError{Name: "price_amount", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.price_amount": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Currency(); ok {
		if err := creditpackage.CurrencyValidator(v); err != nil {
			return &ValidationError{Name: "currency", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.currency": %w`, err)}
		}
	}
	if v, ok := _u.mutation.BadgeText(); ok {
		if err := creditpackage.BadgeTextValidator(v); err != nil {
			return &ValidationError{Name: "badge_text", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.badge_text": %w`, err)}
		}
	}
	return nil
}

func (_u *CreditPackageUpdate) sqlSave(ctx context.Context) (_node int, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(creditpackage.Table, creditpackage.Columns, sqlgraph.NewFieldSpec(creditpackage.FieldID, field.TypeString))
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.Name(); ok {
		_spec.SetField(creditpackage.FieldName, field.TypeString, value)
	}
	if value, ok := _u.mutation.Description(); ok {
		_spec.SetField(creditpackage.FieldDescription, field.TypeString, value)
	}
	if _u.mutation.DescriptionCleared() {
		_spec.ClearField(creditpackage.FieldDescription, field.TypeString)
	}
	if value, ok := _u.mutation.CreditAmount(); ok {
		_spec.SetField(creditpackage.FieldCreditAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCreditAmount(); ok {
		_spec.AddField(creditpackage.FieldCreditAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.BonusCredits(); ok {
		_spec.SetField(creditpackage.FieldBonusCredits, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedBonusCredits(); ok {
		_spec.AddField(creditpackage.FieldBonusCredits, field.TypeInt, value)
	}
	if value, ok := _u.mutation.PriceAmount(); ok {
		_spec.SetField(creditpackage.FieldPriceAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedPriceAmount(); ok {
		_spec.AddField(creditpackage.FieldPriceAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.Currency(); ok {
		_spec.SetField(creditpackage.FieldCurrency, field.TypeString, value)
	}
	if value, ok := _u.mutation.DiscountPercent(); ok {
		_spec.SetField(creditpackage.FieldDiscountPercent, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.AddedDiscountPercent(); ok {
		_spec.AddField(creditpackage.FieldDiscountPercent, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.BadgeText(); ok {
		_spec.SetField(creditpackage.FieldBadgeText, field.TypeString, value)
	}
	if _u.mutation.BadgeTextCleared() {
		_spec.ClearField(creditpackage.FieldBadgeText, field.TypeString)
	}
	if value, ok := _u.mutation.IsPopular(); ok {
		_spec.SetField(creditpackage.FieldIsPopular, field.TypeBool, value)
	}
	if value, ok := _u.mutation.IsActive(); ok {
		_spec.SetField(creditpackage.FieldIsActive, field.TypeBool, value)
	}
	if value, ok := _u.mutation.SortOrder(); ok {
		_spec.SetField(creditpackage.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSortOrder(); ok {
		_spec.AddField(creditpackage.FieldSortOrder, field.TypeInt, value)
	}
	if _node, err = sqlgraph.UpdateNodes(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{creditpackage.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	_u.mutation.done = true
	return _node, nil
}

// CreditPackageUpdateOne is the builder for updating a single CreditPackage entity.
type CreditPackageUpdateOne struct {
	config
	fields   []string
	hooks    []Hook
	mutation *CreditPackageMutation
}

// SetName sets the "name" field.
func (_u *CreditPackageUpdateOne) SetName(v string) *CreditPackageUpdateOne {
	_u.mutation.SetName(v)
	return _u
}

// SetNillableName sets the "name" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableName(v *string) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetName(*v)
	}
	return _u
}

// SetDescription sets the "description" field.
func (_u *CreditPackageUpdateOne) SetDescription(v string) *CreditPackageUpdateOne {
	_u.mutation.SetDescription(v)
	return _u
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableDescription(v *string) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetDescription(*v)
	}
	return _u
}

// ClearDescription clears the value of the "description" field.
func (_u *CreditPackageUpdateOne) ClearDescription() *CreditPackageUpdateOne {
	_u.mutation.ClearDescription()
	return _u
}

// SetCreditAmount sets the "credit_amount" field.
func (_u *CreditPackageUpdateOne) SetCreditAmount(v int) *CreditPackageUpdateOne {
	_u.mutation.ResetCreditAmount()
	_u.mutation.SetCreditAmount(v)
	return _u
}

// SetNillableCreditAmount sets the "credit_amount" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableCreditAmount(v *int) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetCreditAmount(*v)
	}
	return _u
}

// AddCreditAmount adds value to the "credit_amount" field.
func (_u *CreditPackageUpdateOne) AddCreditAmount(v int) *CreditPackageUpdateOne {
	_u.mutation.AddCreditAmount(v)
	return _u
}

// SetBonusCredits sets the "bonus_credits" field.
func (_u *CreditPackageUpdateOne) SetBonusCredits(v int) *CreditPackageUpdateOne {
	_u.mutation.ResetBonusCredits()
	_u.mutation.SetBonusCredits(v)
	return _u
}

// SetNillableBonusCredits sets the "bonus_credits" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableBonusCredits(v *int) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetBonusCredits(*v)
	}
	return _u
}

// AddBonusCredits adds value to the "bonus_credits" field.
func (_u *CreditPackageUpdateOne) AddBonusCredits(v int) *CreditPackageUpdateOne {
	_u.mutation.AddBonusCredits(v)
	return _u
}

// SetPriceAmount sets the "price_amount" field.
func (_u *CreditPackageUpdateOne) SetPriceAmount(v int) *CreditPackageUpdateOne {
	_u.mutation.ResetPriceAmount()
	_u.mutation.SetPriceAmount(v)
	return _u
}

// SetNillablePriceAmount sets the "price_amount" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillablePriceAmount(v *int) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetPriceAmount(*v)
	}
	return _u
}

// AddPriceAmount adds value to the "price_amount" field.
func (_u *CreditPackageUpdateOne) AddPriceAmount(v int) *CreditPackageUpdateOne {
	_u.mutation.AddPriceAmount(v)
	return _u
}

// SetCurrency sets the "currency" field.
func (_u *CreditPackageUpdateOne) SetCurrency(v string) *CreditPackageUpdateOne {
	_u.mutation.SetCurrency(v)
	return _u
}

// SetNillableCurrency sets the "currency" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableCurrency(v *string) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetCurrency(*v)
	}
	return _u
}

// SetDiscountPercent sets the "discount_percent" field.
func (_u *CreditPackageUpdateOne) SetDiscountPercent(v float64) *CreditPackageUpdateOne {
	_u.mutation.ResetDiscountPercent()
	_u.mutation.SetDiscountPercent(v)
	return _u
}

// SetNillableDiscountPercent sets the "discount_percent" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableDiscountPercent(v *float64) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetDiscountPercent(*v)
	}
	return _u
}

// AddDiscountPercent adds value to the "discount_percent" field.
func (_u *CreditPackageUpdateOne) AddDiscountPercent(v float64) *CreditPackageUpdateOne {
	_u.mutation.AddDiscountPercent(v)
	return _u
}

// SetBadgeText sets the "badge_text" field.
func (_u *CreditPackageUpdateOne) SetBadgeText(v string) *CreditPackageUpdateOne {
	_u.mutation.SetBadgeText(v)
	return _u
}

// SetNillableBadgeText sets the "badge_text" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableBadgeText(v *string) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetBadgeText(*v)
	}
	return _u
}

// ClearBadgeText clears the value of the "badge_text" field.
func (_u *CreditPackageUpdateOne) ClearBadgeText() *CreditPackageUpdateOne {
	_u.mutation.ClearBadgeText()
	return _u
}

// SetIsPopular sets the "is_popular" field.
func (_u *CreditPackageUpdateOne) SetIsPopular(v bool) *CreditPackageUpdateOne {
	_u.mutation.SetIsPopular(v)
	return _u
}

// SetNillableIsPopular sets the "is_popular" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableIsPopular(v *bool) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetIsPopular(*v)
	}
	return _u
}

// SetIsActive sets the "is_active" field.
func (_u *CreditPackageUpdateOne) SetIsActive(v bool) *CreditPackageUpdateOne {
	_u.mutation.SetIsActive(v)
	return _u
}

// SetNillableIsActive sets the "is_active" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableIsActive(v *bool) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetIsActive(*v)
	}
	return _u
}

// SetSortOrder sets the "sort_order" field.
func (_u *CreditPackageUpdateOne) SetSortOrder(v int) *CreditPackageUpdateOne {
	_u.mutation.ResetSortOrder()
	_u.mutation.SetSortOrder(v)
	return _u
}

// SetNillableSortOrder sets the "sort_order" field if the given value is not nil.
func (_u *CreditPackageUpdateOne) SetNillableSortOrder(v *int) *CreditPackageUpdateOne {
	if v != nil {
		_u.SetSortOrder(*v)
	}
	return _u
}

// AddSortOrder adds value to the "sort_order" field.
func (_u *CreditPackageUpdateOne) AddSortOrder(v int) *CreditPackageUpdateOne {
	_u.mutation.AddSortOrder(v)
	return _u
}

// Mutation returns the CreditPackageMutation object of the builder.
func (_u *CreditPackageUpdateOne) Mutation() *CreditPackageMutation {
	return _u.mutation
}

// Where appends a list predicates to the CreditPackageUpdate builder.
func (_u *CreditPackageUpdateOne) Where(ps ...predicate.CreditPackage) *CreditPackageUpdateOne {
	_u.mutation.Where(ps...)
	return _u
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (_u *CreditPackageUpdateOne) Select(field string, fields ...string) *CreditPackageUpdateOne {
	_u.fields = append([]string{field}, fields...)
	return _u
}

// Save executes the query and returns the updated CreditPackage entity.
func (_u *CreditPackageUpdateOne) Save(ctx context.Context) (*CreditPackage, error) {
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *CreditPackageUpdateOne) SaveX(ctx context.Context) *CreditPackage {
	node, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (_u *CreditPackageUpdateOne) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *CreditPackageUpdateOne) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *CreditPackageUpdateOne) check() error {
	if v, ok := _u.mutation.Name(); ok {
		if err := creditpackage.NameValidator(v); err != nil {
			return &ValidationError{Name: "name", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.name": %w`, err)}
		}
	}
	if v, ok := _u.mutation.CreditAmount(); ok {
		if err := creditpackage.CreditAmountValidator(v); err != nil {
			return &ValidationError{Name: "credit_amount", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.credit_amount": %w`, err)}
		}
	}
	if v, ok := _u.mutation.PriceAmount(); ok {
		if err := creditpackage.PriceAmountValidator(v); err != nil {
			return &ValidationError{Name: "price_amount", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.price_amount": %w`, err)}
		}
	}
	if v, ok := _u.mutation.Currency(); ok {
		if err := creditpackage.CurrencyValidator(v); err != nil {
			return &ValidationError{Name: "currency", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.currency": %w`, err)}
		}
	}
	if v, ok := _u.mutation.BadgeText(); ok {
		if err := creditpackage.BadgeTextValidator(v); err != nil {
			return &ValidationError{Name: "badge_text", err: fmt.Errorf(`generated: validator failed for field "CreditPackage.badge_text": %w`, err)}
		}
	}
	return nil
}

func (_u *CreditPackageUpdateOne) sqlSave(ctx context.Context) (_node *CreditPackage, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(creditpackage.Table, creditpackage.Columns, sqlgraph.NewFieldSpec(creditpackage.FieldID, field.TypeString))
	id, ok := _u.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`generated: missing "CreditPackage.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := _u.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, creditpackage.FieldID)
		for _, f := range fields {
			if !creditpackage.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("generated: invalid field %q for query", f)}
			}
			if f != creditpackage.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.Name(); ok {
		_spec.SetField(creditpackage.FieldName, field.TypeString, value)
	}
	if value, ok := _u.mutation.Description(); ok {
		_spec.SetField(creditpackage.FieldDescription, field.TypeString, value)
	}
	if _u.mutation.DescriptionCleared() {
		_spec.ClearField(creditpackage.FieldDescription, field.TypeString)
	}
	if value, ok := _u.mutation.CreditAmount(); ok {
		_spec.SetField(creditpackage.FieldCreditAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedCreditAmount(); ok {
		_spec.AddField(creditpackage.FieldCreditAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.BonusCredits(); ok {
		_spec.SetField(creditpackage.FieldBonusCredits, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedBonusCredits(); ok {
		_spec.AddField(creditpackage.FieldBonusCredits, field.TypeInt, value)
	}
	if value, ok := _u.mutation.PriceAmount(); ok {
		_spec.SetField(creditpackage.FieldPriceAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedPriceAmount(); ok {
		_spec.AddField(creditpackage.FieldPriceAmount, field.TypeInt, value)
	}
	if value, ok := _u.mutation.Currency(); ok {
		_spec.SetField(creditpackage.FieldCurrency, field.TypeString, value)
	}
	if value, ok := _u.mutation.DiscountPercent(); ok {
		_spec.SetField(creditpackage.FieldDiscountPercent, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.AddedDiscountPercent(); ok {
		_spec.AddField(creditpackage.FieldDiscountPercent, field.TypeFloat64, value)
	}
	if value, ok := _u.mutation.BadgeText(); ok {
		_spec.SetField(creditpackage.FieldBadgeText, field.TypeString, value)
	}
	if _u.mutation.BadgeTextCleared() {
		_spec.ClearField(creditpackage.FieldBadgeText, field.TypeString)
	}
	if value, ok := _u.mutation.IsPopular(); ok {
		_spec.SetField(creditpackage.FieldIsPopular, field.TypeBool, value)
	}
	if value, ok := _u.mutation.IsActive(); ok {
		_spec.SetField(creditpackage.FieldIsActive, field.TypeBool, value)
	}
	if value, ok := _u.mutation.SortOrder(); ok {
		_spec.SetField(creditpackage.FieldSortOrder, field.TypeInt, value)
	}
	if value, ok := _u.mutation.AddedSortOrder(); ok {
		_spec.AddField(creditpackage.FieldSortOrder, field.TypeInt, value)
	}
	_node = &CreditPackage{config: _u.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{creditpackage.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	_u.mutation.done = true
	return _node, nil
}
